#!/bin/bash

# misc
## Progress bar for cp
cp_p()
{
   strace -q -ewrite cp -ax -- "${1}" "${2}" 2>&1 \
      | awk '{
        count += $NF
            if (count % 10 == 0) {
               percent = count / total_size * 100
               printf "%3d%% [", percent
               for (i=0;i<=percent;i++)
                  printf "="
               printf ">"
               for (i=percent;i<100;i++)
                  printf " "
               printf "]\r"
            }
         }
         END { print "" }' total_size=$(stat -c '%s' "${1}") count=0
}

## Useful to rename lots of files with spaces in their names
rename_without_spaces()
{
    for i in *; do j=`echo $i | tr ' ' _`; mv "$i" $j; done;
}


# svn stuff
## clean all files not under version control
svn_cleanall()
{
    svn st | awk '{print $2}' | xargs rm -rf
}

# git stuff
## wipe all files and directories not under version control
git_cleanall()
{
    git clean -xfd
    git clean -Xfd
}

# update tags
git_tags()
{
    git tag -l | xargs git tag -d
    git fetch --tags
}

test -s ~/.bash_qtfunctions && source ~/.bash_qtfunctions || true
